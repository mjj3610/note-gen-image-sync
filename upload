<h2>内置Server的使用</h2>
<p>PicList内置了一个小型的服务器，用于接收来自其他应用或其他主机的HTTP请求来上传图片。</p>
<p>默认监听地址：<code>0.0.0.0</code>，默认监听端口：<code>36677</code></p>
<h3>接口鉴权</h3>
<p>当将接口暴露于公网时，为了防止恶意上传，PicList提供了接口鉴权功能。</p>
<p><img src="https://assets.piclist.cn/image/202310102349225.webp" alt="202310102349225"></p>
<p>发送请求时添加URL查询参数<code>key</code>即可，例如：<code>http://xxx:36677/upload?key=xxx</code>。</p>
<h3>表单上传</h3>
<ul>
<li>请求方法: <code>POST</code></li>
<li>url: <code>http://127.0.0.1:36677/upload</code> （此处以默认配置为例）</li>
<li>请求body: <code>multipart/form-data</code>格式，key任选，value为图片文件</li>
</ul>
<p>即可上传。</p>
<h3>HTTP调用上传剪贴板图片</h3>
<ul>
<li>请求方法: <code>POST</code></li>
<li>url: <code>http://127.0.0.1:36677/upload</code> （此处以默认配置为例）</li>
<li>请求body: <code>{list: [&#39;xxx.jpg&#39;]}</code> 必须是JSON格式</li>
</ul>
<p>即可上传。</p>
<h3>configName和picbed参数</h3>
<p>PicList支持通过设置<code>picbed</code>和<code>configName</code>两个URL查询参数来指定上传图床和配置文件。例如：
<code>http://127.0.0.1:36677/upload?picbed=aws-s3&amp;configName=piclist-test</code></p>
<p>该配置将会使用<code>aws-s3</code>图床，并且使用<code>piclist-test</code>配置文件。</p>
<p>返回的数据：</p>
<pre><code class="language-json">{
  &quot;success&quot;: true, // or false
  &quot;result&quot;: [&quot;url&quot;]
}
</code></pre>
<h3>HTTP调用上传具体路径图片</h3>
<ul>
<li>method: <code>POST</code></li>
<li>url: <code>http://127.0.0.1:36677/upload</code> （此处以默认配置为例）</li>
<li>request body: <code>{list: [&#39;xxx.jpg&#39;]}</code> 必须是JSON格式</li>
</ul>
<p>返回的数据：</p>
<pre><code class="language-json">{
  &quot;success&quot;: true, // or false
  &quot;result&quot;: [&quot;url&quot;]
}
</code></pre>
<h3>HTTP调用删除图片</h3>
<ul>
<li>method: <code>POST</code></li>
<li>url: <code>http://127.0.0.1:36677/delete</code> （此处以默认配置为例）</li>
<li>request body: <code>{list: [{xx:xx}]}</code> 必须是JSON格式</li>
</ul>
<p>list中的每一项都是一个对象，由上传接口返回数据的<code>fullResult</code>字段组成。</p>
<p>返回的数据：</p>
<pre><code class="language-json">{
  &quot;success&quot;: true, // or false
  &quot;message&quot;: xxx
}
</code></pre>
